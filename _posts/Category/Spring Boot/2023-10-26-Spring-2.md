---
layout:     BLACKCODE
title:      "Docker 설치부터 SpringBoot 배포까지"
subtitle:   ""
description: ""
date:       2023-03-30 1:10:01
author:     "MADness"
header-img: "assets/owner/hero/home-bg.jpg"
header-video: "assets/video/metrix.mp4"
thumbnail: /assets/owner/blog/thumbs/thumb01.png
tags: [Spring]
category: [Spring]

# img url : ![img](/assets/category/Azure/2023/02/08/01.PNG)
---

## Spring Boot Dockerfile 설정
- FROM - JDK를 설정합니다.
- ENV - 환경변수 설정를 설정합니다.
- WORKDIR - 환경변수를 경로로 지정합니다.
- COPY - 빌드된 jar 파일을 application.jar의 파일명으로 복사합니다.
- EXPOSE - 실행될 포트를 설정합니다.
- CMD - 명령어 옵션을 입력합니다.

## jar로 배포하는 경우
```
FROM openjdk:11-jdk
# ENV APP_HOME=/usr/app/
WORKDIR $APP_HOME
COPY build/libs/*.jar application.jar
EXPOSE 8080
CMD ["java", "-jar", "application.jar"]
```

## war로 배포하는 경우
```
FROM openjdk:11-jdk
# ENV APP_HOME=/usr/app/
WORKDIR $APP_HOME
COPY build/libs/*.war application.war
EXPOSE 8080
CMD ["java", "-jar", "application.war"]
```

## 해당 컨테이너 로그 확인
```
sudo docker logs --tail 20 -f <컨테이너 ID>
```
## 컨테이너 삭제
```
sudo docker rm <컨테이너 ID>
```
## 컨테이너 모두 삭제
```
sudo docker rm `docker ps -a -q`
```

## 이미지 삭제
```
sudo docker rmi <이미지ID>
```

## 이미지 모두 삭제
```
sudo docker rmi <docker ps -a -q>
```

## 컨테이너 접속
```
sudo docker attach <컨테이너 이름 or 아이디>
```

## 도커 빌드
```
sudo docker build -t test/test .
```

## 컨테이너 실행
```
sudo docker run -d -p 8080:8080 <이미지의 REPOSITORY>
```

